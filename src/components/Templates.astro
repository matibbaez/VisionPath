---
// src/components/Templates.astro
import { getLangFromUrl } from '../utils/i18n';
const lang = getLangFromUrl(Astro.url);

const templates_es = [
  {
    title: "Justicia & Ley",
    category: "Especialidad: Legal",
    images: [
        "https://images.unsplash.com/photo-1589829085413-56de8ae18c73?q=80&w=800&auto=format&fit=crop",
        "https://images.unsplash.com/photo-1505664194779-8beaceb93744?q=80&w=800&auto=format&fit=crop",
        "https://images.unsplash.com/photo-1479142506502-19b3a3b7ff33?q=80&w=800&auto=format&fit=crop",
        "https://images.unsplash.com/photo-1589391886645-d51941baf7fb?q=80&w=800&auto=format&fit=crop"
    ],
    link: "#",
    isSpecial: true
  },
  {
    title: "Arq. Minimalista",
    category: "Portfolio / Estudio",
    image: "https://images.unsplash.com/photo-1600607686527-6fb886090705?q=80&w=2000&auto=format&fit=crop",
    link: "#"
  },
  {
    title: "Dr. Consultorio",
    category: "Salud / Reservas",
    image: "https://images.unsplash.com/photo-1666214280557-f1b5022eb634?q=80&w=2000&auto=format&fit=crop",
    link: "#"
  },
  {
    title: "Estate Prime",
    category: "Inmobiliaria",
    image: "https://images.unsplash.com/photo-1560518883-ce09059eeffa?q=80&w=2000&auto=format&fit=crop",
    link: "#"
  },
  {
    title: "Resto Bar",
    category: "Gastronomía",
    image: "https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?q=80&w=2000&auto=format&fit=crop",
    link: "#"
  },
  {
    title: "Gym Power",
    category: "Fitness / Landing",
    image: "https://images.unsplash.com/photo-1534438327276-14e5300c3a48?q=80&w=2000&auto=format&fit=crop",
    link: "#"
  }
];

const templates_en = [
  {
    title: "Justice & Law",
    category: "Specialty: Legal",
    images: [
        "https://images.unsplash.com/photo-1589829085413-56de8ae18c73?q=80&w=800&auto=format&fit=crop",
        "https://images.unsplash.com/photo-1505664194779-8beaceb93744?q=80&w=800&auto=format&fit=crop",
        "https://images.unsplash.com/photo-1479142506502-19b3a3b7ff33?q=80&w=800&auto=format&fit=crop",
        "https://images.unsplash.com/photo-1589391886645-d51941baf7fb?q=80&w=800&auto=format&fit=crop"
    ],
    link: "#",
    isSpecial: true
  },
  {
    title: "Minimalist Arch.",
    category: "Portfolio / Studio",
    image: "https://images.unsplash.com/photo-1600607686527-6fb886090705?q=80&w=2000&auto=format&fit=crop",
    link: "#"
  },
  {
    title: "Dr. Office",
    category: "Health / Booking",
    image: "https://images.unsplash.com/photo-1666214280557-f1b5022eb634?q=80&w=2000&auto=format&fit=crop",
    link: "#"
  },
  {
    title: "Estate Prime",
    category: "Real Estate",
    image: "https://images.unsplash.com/photo-1560518883-ce09059eeffa?q=80&w=2000&auto=format&fit=crop",
    link: "#"
  },
  {
    title: "Resto Bar",
    category: "Gastronomy",
    image: "https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?q=80&w=2000&auto=format&fit=crop",
    link: "#"
  },
  {
    title: "Gym Power",
    category: "Fitness / Landing",
    image: "https://images.unsplash.com/photo-1534438327276-14e5300c3a48?q=80&w=2000&auto=format&fit=crop",
    link: "#"
  }
];

const templates = lang === 'en' ? templates_en : templates_es;

const sectionTag = lang === 'en' ? "RESOURCE LIBRARY" : "LIBRERÍA DE RECURSOS";
const title1 = lang === 'en' ? "Solutions by" : "Soluciones por";
const title2 = lang === 'en' ? "Industry." : "Industria.";
const viewCatalog = lang === 'en' ? "View full catalog ->" : "Ver catálogo completo ->";
const designsCount = lang === 'en' ? "15+ Designs" : "15+ Diseños";

---

<section id="soluciones" class="py-24 bg-black relative border-t border-white/5">
    
    <div class="absolute inset-0 z-0 opacity-[0.05] pointer-events-none mix-blend-overlay" 
         style="background-image: url('https://grainy-gradients.vercel.app/noise.svg');">
    </div>

    <div class="max-w-7xl mx-auto px-6 relative z-10">
        
        <div class="flex flex-col md:flex-row justify-between items-end mb-12 gap-6">
            <div>
                <span class="text-[--color-primary] font-mono text-sm tracking-widest uppercase mb-4 block">
                    /// {sectionTag}
                </span>
                <h3 class="text-4xl md:text-6xl font-bold text-white tracking-tight leading-tight">
                    {title1} <br class="hidden md:block" />
                    <span class="text-glow-pop">{title2}</span>
                </h3>
            </div>
            
            <a href="#" class="text-sm font-bold text-white border-b border-white/20 pb-1 hover:text-[--color-primary] hover:border-[--color-primary] transition-colors mb-2">
                {viewCatalog}
            </a>
        </div>

        <div class="flex flex-nowrap overflow-x-auto snap-x snap-mandatory gap-4 px-4 -mx-4 pb-4 scrollbar-hide sm:grid sm:grid-cols-2 lg:grid-cols-3 sm:gap-6 sm:overflow-visible sm:snap-none sm:px-0 sm:mx-0 sm:pb-0">
            
            {templates.map((item) => (
                <a href={item.link} class="min-w-[85vw] sm:min-w-0 snap-center group relative aspect-[4/3] rounded-2xl overflow-hidden bg-[#0A0A0A] border border-white/10 cursor-pointer hover:border-white/20 transition-colors">
                    
                    {item.isSpecial ? (
                        /* --- MODO SCROLL INFINITO (Para Abogados) --- */
                        <div class="absolute inset-0 w-full h-full overflow-hidden">
                            <div class="flex flex-col animate-vertical-scroll w-full">
                                {[...item.images, ...item.images].map((imgUrl) => (
                                    <img 
                                        src={imgUrl} 
                                        class="w-full aspect-[4/3] object-cover opacity-60 group-hover:opacity-100 transition-opacity duration-500 grayscale group-hover:grayscale-0 border-b border-black" 
                                        alt="Legal Template"
                                    />
                                ))}
                            </div>
                            <div class="absolute top-3 right-3 z-20 
                                        bg-black/90 backdrop-blur-md border border-[--color-primary]/50 
                                        text-white text-[10px] font-bold px-3 py-1.5 rounded-full 
                                        shadow-[0_0_10px_rgba(0,0,0,0.5)] uppercase tracking-wider
                                        group-hover:bg-[--color-primary] 
                                        group-hover:text-white 
                                        group-hover:border-[--color-primary]
                                        transition-all duration-300">
                                {designsCount}
                            </div>
                        </div>
                    ) : (
                        /* --- MODO IMAGEN NORMAL --- */
                        <img 
                            src={item.image} 
                            alt={item.title} 
                            class="absolute inset-0 w-full h-full object-cover transition-all duration-700 group-hover:scale-110 grayscale group-hover:grayscale-0 opacity-60 group-hover:opacity-100" 
                        />
                    )}

                    <div class="absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent opacity-90 group-hover:opacity-60 transition-opacity duration-300 pointer-events-none"></div>

                    <div class="absolute bottom-0 left-0 p-6 w-full transform translate-y-2 group-hover:translate-y-0 transition-transform duration-300 z-20">
                        <span class="text-[10px] font-mono uppercase tracking-wider text-[--color-primary] mb-1 block opacity-0 group-hover:opacity-100 transition-opacity duration-300 delay-100">
                            {item.category}
                        </span>
                        
                        <div class="flex justify-between items-center">
                            <h4 class="text-xl font-bold text-white group-hover:text-white transition-colors">
                                {item.title}
                            </h4>
                            
                            <div class="w-8 h-8 rounded-full bg-white/10 backdrop-blur-md flex items-center justify-center text-white opacity-0 group-hover:opacity-100 -translate-x-4 group-hover:translate-x-0 transition-all duration-300">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
                            </div>
                        </div>
                    </div>
                </a>
            ))}
        </div>

    </div>
</section>

<style>
    /* Ocultar barra de scroll pero permitir deslizar */
    .scrollbar-hide::-webkit-scrollbar {
        display: none;
    }
    .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }

    /* Animación de Scroll Vertical Suave */
    .animate-vertical-scroll {
        animation: scrollVertical 20s linear infinite;
    }
    
    .group:hover .animate-vertical-scroll {
        animation-play-state: paused;
    }

    @keyframes scrollVertical {
        from { transform: translateY(0); }
        to { transform: translateY(-50%); } 
    }
</style>