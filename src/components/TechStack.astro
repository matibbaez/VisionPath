---
import { getLangFromUrl } from '../utils/i18n';
const lang = getLangFromUrl(Astro.url);

const row1 = [
  { name: "Astro", icon: "https://astro.build/assets/press/astro-icon-light.svg" },
  { name: "React", icon: "https://upload.wikimedia.org/wikipedia/commons/a/a7/React-icon.svg" },
  { name: "Next.js", icon: "https://svgl.app/library/nextjs_icon_dark.svg" }, 
  { name: "Tailwind", icon: "https://svgl.app/library/tailwindcss.svg" },
  { name: "TypeScript", icon: "https://svgl.app/library/typescript.svg" },
  { name: "Figma", icon: "https://svgl.app/library/figma.svg" },
  { name: "Vercel", icon: "https://svgl.app/library/vercel.svg" },
];

const title1 = lang === 'en' ? "Powered by" : "Potenciado por";
const title2 = lang === 'en' ? "elite technology." : "tecnología de élite.";
const header = lang === 'en' ? "SYSTEM ARCHITECTURE" : "ARQUITECTURA DEL SISTEMA";

const row2 = [
  { name: "Supabase", icon: "https://svgl.app/library/supabase.svg" },
  { name: "Node.js", icon: "https://svgl.app/library/nodejs.svg" },
  { name: "Python", icon: "https://svgl.app/library/python.svg" },
  { name: "Docker", icon: "https://svgl.app/library/docker.svg" },
  { name: "PostgreSQL", icon: "https://svgl.app/library/postgresql.svg" },
  { name: "Git", icon: "https://svgl.app/library/git.svg" },
  { name: "Stripe", icon: "https://svgl.app/library/stripe.svg" },
];
---

<section class="py-24 md:py-32 bg-black relative overflow-hidden flex flex-col items-center justify-center border-y border-white/5">
    
    <div class="mb-16 md:mb-24 text-center relative z-10 px-6 max-w-5xl mx-auto">
        <span class="text-[--color-primary] font-mono text-sm tracking-widest uppercase mb-4 block">
            /// {header}
        </span>
        <h2 class="text-4xl md:text-6xl font-bold text-white tracking-tight leading-tight">
            {title1} <br class="hidden md:block" />
            <span class="text-glow-pop">{title2}</span>
        </h2>
    </div>

    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-full bg-[radial-gradient(ellipse_at_center,_var(--color-primary)_0%,_transparent_70%)] opacity-5 pointer-events-none"></div>

    <div class="relative w-full [mask-image:linear-gradient(to_right,transparent,black_20%,black_80%,transparent)]">
        
        <div class="flex mb-4 md:mb-6 overflow-hidden group">
            <div class="flex animate-infinite-scroll group-hover:paused gap-4 pr-4">
                {[...row1, ...row1, ...row1, ...row1].map((tech) => (
                    <div class="flex items-center gap-3 px-5 py-3 md:px-6 md:py-4 rounded-xl border border-white/5 bg-white/5 backdrop-blur-sm transition-all duration-300 hover:border-[--color-primary]/50 hover:bg-[--color-primary]/10 hover:shadow-[0_0_15px_rgba(255,85,0,0.2)] shrink-0 cursor-default">
                        <img src={tech.icon} alt={tech.name} class="w-5 h-5 md:w-6 md:h-6 object-contain grayscale group-hover:grayscale-0 transition-all duration-300" />
                        <span class="text-sm font-medium text-gray-400 group-hover:text-white transition-colors">{tech.name}</span>
                    </div>
                ))}
            </div>
        </div>

        <div class="flex overflow-hidden group">
            <div class="flex animate-infinite-scroll-reverse group-hover:paused gap-4 pr-4">
                {[...row2, ...row2, ...row2, ...row2].map((tech) => (
                    <div class="flex items-center gap-3 px-5 py-3 md:px-6 md:py-4 rounded-xl border border-white/5 bg-white/5 backdrop-blur-sm transition-all duration-300 hover:border-[--color-primary]/50 hover:bg-[--color-primary]/10 hover:shadow-[0_0_15px_rgba(255,85,0,0.2)] shrink-0 cursor-default">
                        <img src={tech.icon} alt={tech.name} class="w-5 h-5 md:w-6 md:h-6 object-contain grayscale group-hover:grayscale-0 transition-all duration-300" />
                        <span class="text-sm font-medium text-gray-400 group-hover:text-white transition-colors">{tech.name}</span>
                    </div>
                ))}
            </div>
        </div>

    </div>
</section>

<style>
    .animate-infinite-scroll {
        animation: scroll 40s linear infinite;
    }
    .animate-infinite-scroll-reverse {
        animation: scroll-reverse 40s linear infinite;
    }
    .group-hover\:paused:hover {
        animation-play-state: paused;
    }
    @keyframes scroll {
        from { transform: translateX(0); }
        to { transform: translateX(-50%); }
    }
    @keyframes scroll-reverse {
        from { transform: translateX(-50%); }
        to { transform: translateX(0); }
    }
</style>